# 클래스와 멤버의 접근 권한을 최소화하라

기본 원칙은 모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다. 즉, 소프트웨어가 올바른 동작하는 한 항상 가장 낮은 접근 수준을 부여.

# 정보 은닉의 장점

- 시스템 개발 속도 높임. 여러 컴포넌트 병렬 개발 가능.
- 관리 비용 줄임. 각 컴포넌트를 빨리 파악해 디버깅 / 컴포넌트 교체 부담 적음
- 성능최적화에 도움.
- 재사용성.
- 큰 시스템 제작에 있어서 난이도 낮춤.

# 접근지정자

접근 범위가 좁은 순서대로 접근 지정자를 나열하면 아래와 같다.

### private
멤버를 선언한 톱레벨 클래스에서만 접근할 수 있다.

### package-private
멤버가 소속된 패키지 안의 모든 클래스에서 접근할 수 있다.접근 제한자를 지정하지 않았을 때 적용되는 패키지 접근 수준이다.
단 인터페이스의 멤버는 기본적으로 public이 적용된다.

### protected
package-private의 접근 범위를 포함하며, 이 멤버를 선언한 클래스의 하위 클래스에서도 접근할 수 있다.

### public
모든 곳에서 접근할 수 있다.

# 컴포넌트를 설계하는 방법

핵심은 모든 클래스와 멤버의 접근성을 최대한 좁혀야 한다. 항상 가장 낮은 접근 지정자 수준을 부여해야 한다.

### 패키지 외부에서 사용할 이유가 없다면 package-private으로 선언하자.
- 그러면 API가 아닌 내부 구현이 되어 언제든 수정할 수 있다.

### 경우에 따라 private static 중첩 클래스를 사용해보자.
- 하나의 클래스에서만 사용하는 package-private 톱레벨 클래스나 인터페이스가 대상이다.
- 이를 사용하는 클래스 안에 private static으로 중첩시켜 보자.
- 이렇게 하면 바깥 클래스 하나에서만 접근할 수 있다.

### 클래스의 공개 API를 제외한 모든 멤버는 private으로 만들자.
- 같은 패키지의 다른 클래스가 접근해야 하는 멤버에 한해 package-private으로 풀어준다.
- 다만, 상위 클래스의 메서드를 재정의할 때는 접근 수준을 상위 클래스보다 좁게 설정할 수 없다.

### 테스트만을 위해 클래스, 인터페이스 그리고 멤버를 공개 API로 만들어서는 안된다.

### public 클래스의 인스턴스 필드는 되도록 public이 아니어야 한다.
- 불변을 보장하기 어렵고 일반적으로 스레드 안전하지 않다.

### public static final 필드는 기본 타입이나 불변 객체를 참조해야 한다.
- 하지만 public static final 배열 필드를 두거나 이를 반환하는 접근자 메서드는 두면 안된다.
- 다른 객체를 참조하도록 바꿀 수는 없지만 참조된 객체 자체가 수정될 수는 있다.
- 길이가 0이 아닌 배열은 모두 변경 가능하다.


